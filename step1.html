<!doctype html>
<html lang="en">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <link rel="stylesheet" href="./css/reset.css">
    <link rel="stylesheet" href="./css/style.css">
    <link href="https://webfontworld.github.io/gmarket/GmarketSans.css" rel="stylesheet">
    <title>KB데이타시스템 상품가입</title>
</head>

<body class="d-flex justify-content-center align-items-center">
    <div class="container">
        <div class="pricing-header p-4 pb-md-4 mx-auto">
            <h3 class="text-center">자동차보험 가입 안내</h3>
            <div class="row d-flex justify-content-center align-item-center">
                <div class="col-md-5 align-items-center d-flex">
                    <p class=" text-muted">
                        안녕하세요 고객님! 적절한 보험 상품을 추천하기 위해,
                        고객님의 개인 정보를 입력해주세요.
                        개인정보는 일체 저장되지 않으며,
                        보험료 계산/가입을 위한 용도로 조회됩니다.
                    </p>
                </div>
            </div>
            <div class="input-form-backgroud row">
                <div class="input-form">
                    <form name="signup" id="signup" class="needs-validation" novalidate>
                        <div class="row d-flex justify-content-center">
                            <div class="col-md-4 mb-2">
                                <label for="name">이름</label>
                                <input type="text" class="form-control" id="name" placeholder="ex) 홍길동" name="name" minlength='2' required>
                                <div class="invalid-feedback">
                                    이름을 입력해주세요.
                                </div>
                            </div>
                        </div>
                        <div class="row  justify-content-center">
                            <div class="col-md-2 mb-2">
                                <label for="prenum">주민등록번호</label>
                                <input type="text" class="form-control cu-md-pl" name="birthday" id="prenum" placeholder="앞자리" onKeyup="this.value=this.value.replace(/[^-0-9]/g,'');" pattern=".{6,6}" minlength='6' maxlength="6" required>
                                <div class="invalid-feedback">
                                    앞자리를 다시 입력해주세요.
                                </div>
                            </div>
                            <div class="col-md-2 mb-3">
                                <label for="postnum" style="font-size: 0px;"> </label>
                                <input type="password" class="form-control cu-md-pr" id="postnum" placeholder="뒷자리" onKeydown="this.value=this.value.replace(/[^-0-9]/g,'');" minlength='7' maxlength="7" pattern=".{7,7}" required>
                                <div class="invalid-feedback">
                                    뒷자리를 다시 입력해주세요.
                                </div>
                            </div>
                        </div>
                        <div class="row d-flex justify-content-center">
                            <div class="col-md-2 mb-2">
                                <label for="car">자동차</label>
                                <input type="text" class="form-control" name="car" id="car" placeholder="ex : 벤츠" required>
                                <div class="invalid-feedback">
                                    자동차 명을 입력해주세요.
                                </div>

                            </div>
                            <div class="col-md-2 mb-3">
                                <label for="postnum">연식</label>
                                <select name="car_year" id="year" class="form-control">

                                </select>
                            </div>
                        </div>
                        <div class="row d-flex justify-content-center">
                            <div class="col-md-4 mb-3">
                                <input type="checkbox" class="custom-control-input" id="aggrement" required>
                                <label class="custom-control-label" for="aggrement">개인정보 수집 및 이용에 동의합니다.</label>
                                <div class="invalid-feedback">
                                    개인정보 수집 및 이용에 동의해주세요.
                                </div>
                            </div>
                        </div>
                        <div class="row d-flex justify-content-center">
                            <div class="col-md-4 mb-3  d-flex justify-content-center" id="send">
                                <button class="btn btn-lg btn-block text-dark btn-yellow" type="submit" onclick="nextPage()">보험료 계산 / 가입</button>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</body>
<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
<script>
    let prenum, postnum;
    window.onload = function() {
        let select = document.getElementsByName("car_year")[0];
        let arr = [];
        for (let i = 1; i <= 9; i++) {
            arr.push(i + "년");
        }
        arr.push("10년 이상")
        for (let i = 0; i < arr.length; i++) {
            let option = document.createElement("option");
            option.value = arr[i];
            option.text = arr[i];
            select.appendChild(option);
        }
        const precheck = document.getElementById("prenum");
        precheck.addEventListener("change", (e) => {
            prenum = e.target.value;
        });
        const postcheck = document.getElementById("postnum");
        postcheck.addEventListener("change", (e) => {
            postnum = e.target.value;
        });

    }

    function jumin() {
        let prenum = document.getElementById("prenum").value;
        let postnum = document.getElementById("postnum").value;
        let juminnum = prenum + postnum;
        if (juminnum.length != 13) {
            return false;
        }
        let sum = 0;
        let last = parseInt(juminnum.charAt(12));
        for (let i = 0; i < 12; i++) {
            sum += parseInt(juminnum.charAt(i)) * ((i % 8) + 2);
        }
        let result = (11 - (sum % 11)) % 10;
        if (result != last) {
            return false;
        }
        return true;
    }

    function nextPage() {
        'use strict'
        var forms = document.querySelectorAll('.needs-validation')
        let object = {};
        Array.prototype.slice.call(forms)
            .forEach(function(form) {
                form.addEventListener('submit', function(event) {
                    if (!form.checkValidity()) {
                        event.preventDefault()
                        event.stopPropagation()
                        form.classList.add('was-validated')
                    } else {
                        let formData = new FormData(document.querySelector('#signup'));
                        for (let data of formData) {
                            sessionStorage.setItem(data[0], data[1]);
                        }
                        document.signup.action = 'step2.html'
                    }
                })
            })
    }
</script>

</html>